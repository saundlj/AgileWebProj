<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- External CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename = 'main.css')}}">

    <!-- Title -->
    {% if title %}
    <title>{{title}}</title> <!-- Sets the title of the HTML page -->
    {% else %}
    <title>Career Compass</title> <!-- Sets default title if none provided -->
    {% endif %}
</head>
<body style="background-image: url('../static/Background.png'); background-size: 100% 100%; background-attachment: fixed; background-position: center;">
    <!-- Navigation Bar -->
    <header class="site-header">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-md fixed-top navbar-scroll">
          <div class="container">
            <!-- Brand -->
            <a class="navbar-brand" href="{{url_for('home')}}">
              <span><img src="../static/compass.png" alt="Compass Logo" class="img-fluid" style="max-height: 75px;"></span>
            </a>
            <!-- Toggler for mobile -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggle" aria-controls="navbarToggle" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span> <!-- Hamburger icon for mobile -->
            </button>
            <!-- Navbar Links -->
            <div class="collapse navbar-collapse" id="navbarToggle">
              <!-- Left side of navbar -->
              <div class="navbar-nav mr-auto">
                <a class="nav-item nav-link" href="{{url_for('feed')}}">Job Map</a> <!-- Link to Job Map page -->
                <a class="nav-item nav-link" href="{{url_for('about')}}">About</a> <!-- Link to About page -->
              </div>
              <!-- Right side of navbar -->
              <div class="navbar-nav">
                
                {% if current_user.is_authenticated %}
                <a class="nav-item nav-link" href="{{url_for('account')}}">Account</a>
                  <a class="nav-item nav-link" href="{{url_for('logout')}}">Logout</a>
                {% else %}
                  <a class="nav-item nav-link" href="{{url_for('login')}}">Login</a>
                  <a class="nav-item nav-link" href="{{url_for('createAccount')}}">Create Account</a>
                {% endif %}
              </div>
            </div>
          </div>
        </nav>
    </header>

    <div class="container">
        <!-- Display Flash messages above content -->
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{category}}">
                {{message}}
              </div>
            {% endfor%}
          {% endif %}
        {% endwith %}

        {% block content %}{% endblock %} <!-- Placeholder for main content, to be filled by child templates -->
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- AJAX refreshing script  -->
    <script>
      $(document).ready(function(){
        // Function to load data initially and at intervals
        function refreshContent() {
            $.ajax({
                url: '/fetch-content', // URL to the server-side endpoint for fetching content
                type: 'GET', // HTTP method (GET or POST)
                success: function(data){
                    $('#result').html(data); // Replace the content of #result with the fetched content
                },
                error: function(xhr, status, error){
                    console.error(status, error); // Handle errors
                }
            });
        }

        // Load content initially
        refreshContent();

        // Set interval to refresh content every 5 seconds (adjust as needed)
        setInterval(refreshContent, 5000); // 5000 milliseconds = 5 seconds
      });
    </script>

    <!-- script for login page quotes-->
    <script>
      var textOptions = [
          "Job Seeking got you feeling lost?...Let us be your compass",
          "Your compass is pointing toward a bright future.",
          "Chart your path to success with Career Compass.",
          "Find your True North in in your Career Journey.",
          "Let us help you navigate the paths to professional success!",
          "Empower yourself with informed career choices through our platform!",
          "Chart your course to success today and let your career destiny unfold",
          "Steer towards your dream job with confidence and guidance",
          "Find clarity and direction in your career pursuits with our assistance!",
          "Empower Yourself to Make Informed Career Decisions and Shape Your Future!",
          "Discover Your Professional North Star and Navigate Your Career Path with Confidence!",
          "Chart Your Unique Course to Success and Let Us Illuminate the Way Forward!",
          "Empower Your Career Aspirations and Achieve Your Professional Dreams with Us!",
          "Uncover Hidden Opportunities and Propel Your Career Forward with Our Support!",
          "Forge Your Own Path to Success and Let Us Provide the Tools and Guidance!",
          "Empower Your Job Search with Our Platform and Find the Perfect Fit for You!"
      ];
      // Function to get a random element from the array
      function getRandomText() {
          return textOptions[Math.floor(Math.random() * textOptions.length)];
      }

      // Function to display random text on refresh
      function displayRandomText() {
          var randomText = getRandomText();
          document.getElementById("randomText").innerText = randomText;
      }

      // Call the function when the page loads
      displayRandomText();
    </script>
</body>
</html>
