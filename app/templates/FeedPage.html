{% extends "layout.html" %}
{% block content %}

<!-- creating button redirecting user to create job post page-->
<button class = 'btn btn-info btn-sm' onclick="location.href='{{ url_for('JobPost') }}'">
    <!-- adding pen picture to button label-->
    <span class= "fa fa-pen"></span> Create a Job Post
</button>
<br>

<div id="result">
  
  <!-- creating bootstrap container for job posts -->
  <div class="container">

    <!-- creating a bootstrap row which every post will sit in -->
    <div class="row">

        <!-- Loop through each post -->
        {% for post in posts %}

        <!--for each post access all 12 bootstrap columns-->
        <div class="col-md-12">

            <!-- create a feedbox object -->
            <div class="feedBox">

                <!-- words for post title -->
                <h1> {{post.title}}

                    <!-- label for post title and expandable content-->
                    <span>

                        <!-- stylying button with 3 different selectors -->
                        <button onclick="toggleExpand('expand_btn_{{ loop.index }}')" class = "btn btn-sm btn-outline-info feed_expand_btn" id = "expand_btn_{{ loop.index }}">

                            <!-- image of plus icon as defualt "+" rendering inappropriate-->
                            <img src="../static/plusIcon.png" alt="" style="width: 20px; height: 22px;">
                        </button>
                    </span>
                </h1>

                <!-- Metadata -->
                <p><strong>Posted By {{post.company}} on {{post.date_posted}}</strong></p>
                <p><strong>Location :</strong> {{post.location}}</p>
                <!-- Expandable content section -->
                <div class="expandable_content" id= "expandable_content_{{loop.index}}" style="display: none;">
                    <p><strong>Job Type : </strong>{{post.job_type}}</p>
                    <p><strong>Salary : </strong>{{post.salary}}</p>
                    <p><strong>Description : </strong>{{post.description}}</p>
                    <!-- applying for job button-->
                    <p><button class = 'btn btn-info btn-sm' onclick="applyBox()"> <span class= "fa fa-pen"></span> Apply </button></p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
  </div>
</div>

<script>
    function toggleExpand(id) {
        // ID for the button which will expand the content
        let x = document.getElementById(id);
        
        // ID for the content to be expanded
        let y = document.getElementById("expandable_content_" + id.split("_")[2]);
        console.log(y);

        if (y.style.display === "none") {
            y.style.display = "block";
            x.innerHTML = '<img src="static/minusIcon.png" alt="" style="width: 20px; height: 22px;">';
        } else {
            y.style.display = "none";
            x.innerHTML = '<img src="static/plusIcon.png" alt="" style="width: 20px; height: 22px;">';
        }
    }
</script>

{% endblock content %}